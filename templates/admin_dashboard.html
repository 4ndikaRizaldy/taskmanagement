<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
  <h2 class="text-3xl font-bold mb-6 text-gray-800">ðŸ“Š Dashboard Admin</h2>

  <div class="bg-white shadow-md rounded-lg overflow-hidden">
    <table class="w-full border-collapse">
      <thead class="bg-blue-500 text-white">
        <tr>
          <th class="py-3 px-4 text-left">Nama Siswa</th>
          <th class="py-3 px-4 text-left">Progress</th>
        </tr>
      </thead>
      <tbody id="siswaTable" class="divide-y divide-gray-200 bg-white">
        <!-- Data diisi JS -->
      </tbody>
    </table>
  </div>

  <script>
    async function loadSiswa() {
      const res = await fetch("/api/admin/siswa");
      const data = await res.json();
      const tbody = document.getElementById("siswaTable");
      tbody.innerHTML = "";

      data.siswa.forEach(s => {
        const row = document.createElement("tr");
        row.className = "hover:bg-gray-100 transition";

        const tdNama = document.createElement("td");
        tdNama.className = "py-2 px-4 font-medium text-gray-700";
        tdNama.textContent = s.nama;

        const tdProgress = document.createElement("td");
        tdProgress.className = "py-2 px-4";
        if (s.current_task > data.total_tugas) {
          tdProgress.innerHTML = `<span class="text-green-600 font-semibold">âœ” Semua selesai</span>`;
        } else {
          tdProgress.innerHTML = `<span class="text-yellow-600">Sedang di tugas ke-${s.current_task}</span>`;
        }

        row.appendChild(tdNama);
        row.appendChild(tdProgress);
        tbody.appendChild(row);
      });
    }

    loadSiswa();
  </script>
</body>
</html>
